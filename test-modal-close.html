<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G14Q10H6Y2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-G14Q10H6Y2');
</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Modal Close Button Test</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .test-btn { padding: 10px 20px; margin: 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ðŸ§ª Modal Close Button Test</h2>
  <p>Test the member portal modal close functionality</p>
  
  <button class="test-btn" onclick="testLoginModal()">ðŸ” Test Login Modal</button>
  <button class="test-btn" onclick="testRegistrationModal()">ðŸ“ Test Registration Modal</button>
  <button class="test-btn" onclick="testMemberDashboard()">ðŸ‘¤ Test Member Dashboard</button>
  
  <div id="test-results" style="margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 4px;">
    <strong>Test Results:</strong>
    <ul id="results-list"></ul>
  </div>

  <!-- Load Member Portal System -->
  <script src="js/member-portal.js"></script>
  <script>
    let testResults = [];
    
    function logTest(test, result) {
      testResults.push({ test, result });
      updateResults();
    }
    
    function updateResults() {
      const list = document.getElementById('results-list');
      list.innerHTML = testResults.map(r => 
        `<li style="color: ${r.result ? 'green' : 'red'};">
          ${r.result ? 'âœ…' : 'âŒ'} ${r.test}
        </li>`
      ).join('');
    }
    
    function testLoginModal() {
      console.log('Testing login modal...');
      try {
        if (typeof memberPortal !== 'undefined') {
          memberPortal.showLoginModal();
          logTest('Login Modal Opens', true);
          
          // Test close button after a short delay
          setTimeout(() => {
            const modal = document.querySelector('.modal-close-btn');
            if (modal) {
              logTest('Close Button Found', true);
              console.log('Close button element:', modal);
            } else {
              logTest('Close Button Found', false);
            }
          }, 100);
        } else {
          logTest('Member Portal Available', false);
        }
      } catch (error) {
        console.error('Login modal test error:', error);
        logTest('Login Modal Opens', false);
      }
    }
    
    function testRegistrationModal() {
      console.log('Testing registration modal...');
      try {
        if (typeof memberPortal !== 'undefined') {
          memberPortal.showRegistrationModal();
          logTest('Registration Modal Opens', true);
        } else {
          logTest('Member Portal Available', false);
        }
      } catch (error) {
        console.error('Registration modal test error:', error);
        logTest('Registration Modal Opens', false);
      }
    }
    
    function testMemberDashboard() {
      console.log('Testing member dashboard...');
      try {
        if (typeof memberPortal !== 'undefined') {
          // Try to login first
          memberPortal.members['test@example.com'] = {
            email: 'test@example.com',
            name: 'Test User',
            password: memberPortal.hashPassword('test123'),
            memberType: 'member',
            joinDate: '2024-01-01'
          };
          
          memberPortal.currentUser = memberPortal.members['test@example.com'];
          memberPortal.showMemberDashboard();
          logTest('Member Dashboard Opens', true);
        } else {
          logTest('Member Portal Available', false);
        }
      } catch (error) {
        console.error('Member dashboard test error:', error);
        logTest('Member Dashboard Opens', false);
      }
    }
    
    // Initialize test
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Modal Close Test Page Loaded');
      logTest('Page Loaded', true);
      logTest('Member Portal Available', typeof memberPortal !== 'undefined');
    });
  </script>
</body>
</html>
